#!/usr/bin/env bash

VK_PATH=~/dev/vulkan/sdk/*/x86_64/bin/
COMPILER=$VK_PATH/glslangValidator

function compile {
  name=$1; extension=$2; prefix=$3

  # Check for syntax errors
  if ! $COMPILER --target-env vulkan1.0 $name.$extension
    then exit 1
  fi

  # Generate binary and disassembly
  $COMPILER -H $name.$extension \
    -o out/$prefix$extension.spv \
    > out/$prefix$extension.spvasm
}

./clean
mkdir -p out

compile font3d vert font3d_
compile font3d frag font3d_

compile debug vert debug_
compile debug frag debug_

compile shader vert
compile shader frag
